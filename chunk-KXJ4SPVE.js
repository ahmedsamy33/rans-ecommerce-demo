import{a as N,b as M,c as G,d as B,e as V,f as W,g as U,i as ae,j as se,l as Ze,m as et}from"./chunk-D5GLOXRK.js";import{a as Le}from"./chunk-4D7WS2EX.js";import{a as ze,b as $e,d as _e,g as Ee,i as Qe}from"./chunk-WFL2HFP5.js";import"./chunk-BYXBJQAS.js";import{a as be,b as g,d as Xe}from"./chunk-F7N4OOQB.js";import"./chunk-SHNVGYBB.js";import{d as Z}from"./chunk-FNEIGVV3.js";import{a as qe}from"./chunk-2FFOQCPS.js";import"./chunk-76MIRPDM.js";import"./chunk-UZW6OXPX.js";import{c as Ue}from"./chunk-DFF2A2V2.js";import{a as ie}from"./chunk-XE4SEQK7.js";import{a as te}from"./chunk-Q75O5SUG.js";import"./chunk-V24KNJUK.js";import{a as We,b as Ie,g as Ke,m as Je,o as Ye,q as He,r as re}from"./chunk-MTOQREGE.js";import"./chunk-IZOBXTRQ.js";import{b as oe,c as ne}from"./chunk-JEHFEJHR.js";import{a as ve}from"./chunk-3LCGF45W.js";import{a as Ve,b as j,c as k}from"./chunk-SNTC6ISU.js";import"./chunk-5UOHSEQ7.js";import{d as _}from"./chunk-LGSLEHKQ.js";import{g as Be,h as O,i as ee}from"./chunk-6ZSGU6WM.js";import{a as Me,b as Ge}from"./chunk-WJCMRRD3.js";import"./chunk-SYIRRWMM.js";import"./chunk-T3Q3DASN.js";import{a as ke,b as Ne}from"./chunk-LLJ4QRQX.js";import"./chunk-EKTMPHIH.js";import"./chunk-E4P4CAIP.js";import{Aa as Re,Ba as L,Bc as je,Cc as ye,D as Pe,Ec as Fe,Fb as Se,Gb as m,Gc as h,I as xe,J as K,Nb as we,Pb as Ae,Qb as Oe,Rb as s,Rc as I,Sb as p,Tb as D,Tc as Q,W as v,Xb as X,_ as T,_a as q,_b as b,ac as S,cb as a,ea as F,f as Te,je as z,lb as C,mc as f,na as P,oa as x,oc as u,pc as w,qb as R,qc as y,vc as A,xb as De}from"./chunk-VU6Q4IP4.js";import{a as r,b as l}from"./chunk-TSRGIXR5.js";function mt(i,e){if(i&1){let t=X();s(0,"mat-chip-row",4),b("removed",function(){let n=P(t).$implicit,c=S();return x(c.removeChip(n))}),u(1),s(2,"button",5)(3,"mat-icon"),u(4,"close"),p()()()}if(i&2){let t=e.$implicit;a(),y(" ",t.name," "),a(),Se("aria-label","remove "+t.name)}}var le=class i{#o=F(z);#e=F(Le);filterChange=Re();#n=C({});processId=L.required();filterData={};selectedChips=C([]);formFields=[N,M,G,B,V,W,U,_e,Ee];#i;#t=new Te;objectiveNameFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});objectiveOwnerFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});programNameFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});programOwnerFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});impactFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});keyResultFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});employeeFilter=I({source:this.processId,computation:(e,t)=>this.createFilterComputation(e,t)});objectiveList=C([]);objectiveOwnerList=C([]);programList=C([]);programOwnerList=C([]);impactList=C([]);keyResultList=C([]);employeeList=C([]);constructor(){this.initializeFilterActions(),this.listenToSearchTyping(),Q(()=>{this.setDropDownOptions()})}objectiveDropdown=_({request:()=>this.objectiveNameFilter(),loader:({request:e})=>this.#e.getObjectives(e).pipe(v(t=>this.objectiveList.update(o=>[...o,...t.content])))});objectiveOwnerDropdown=_({request:()=>this.objectiveOwnerFilter(),loader:({request:e})=>this.#e.getObjectiveOwners(e).pipe(v(t=>this.objectiveOwnerList.update(o=>[...o,...t.content])))});programDropdown=_({request:()=>this.programNameFilter(),loader:({request:e})=>this.#e.getPrograms(e).pipe(v(t=>this.programList.update(o=>[...o,...t.content])))});programOwnerDropdown=_({request:()=>this.programOwnerFilter(),loader:({request:e})=>this.#e.getProgramOwners(e).pipe(v(t=>this.programOwnerList.update(o=>[...o,...t.content])))});impactDropdown=_({request:()=>this.impactFilter(),loader:({request:e})=>this.#e.getImpacts(e).pipe(v(t=>this.impactList.update(o=>[...o,...t.content])))});keyResultDropdown=_({request:()=>this.keyResultFilter(),loader:({request:e})=>this.#e.getKeyResults(e).pipe(v(t=>this.keyResultList.update(o=>[...o,...t.content])))});employeeDropdown=_({request:()=>this.employeeFilter(),loader:({request:e})=>this.#e.getActivityAssignee(e).pipe(v(t=>this.employeeList.update(o=>[...o,...t.content])))});initializeFilterActions(){this.handleFilterFieldsSearchEvents(),this.handleFilterFieldsChangeEvents(),this.handleFilterFieldsScrollEvents()}setDropDownOptions(){N.fieldConfig.options.set(this.objectiveList()||[]),M.fieldConfig.options.set(this.objectiveOwnerList()||[]),G.fieldConfig.options.set(this.programList()||[]),B.fieldConfig.options.set(this.programOwnerList()||[]),V.fieldConfig.options.set(this.impactList()||[]),W.fieldConfig.options.set(this.keyResultList()||[]),U.fieldConfig.options.set(this.employeeList()||[])}updateNextFilters(e,t){e.forEach(o=>{this[o].update(n=>l(r(r({},n),this.filterData),{startDate:t?.startDate??void 0,endDate:(t?.startDate&&t?.endDate)??void 0}))})}updateFilterByKey(e,t,o){this[e].update(n=>l(r(r({},n),this.filterData),{[t]:o}))}handleFilterFieldsChangeEvents(){N.onChange=e=>{this.resetNextList(["objectiveOwnerList","programList","programOwnerList","impactList","keyResultList","employeeList"]),this.updateFilterData("objectiveIds",e),this.updateChips(this.objectiveList()||[],e),this.updateFilterByKey("objectiveOwnerFilter","objectiveIds",e),this.updateNextFilters(["objectiveOwnerFilter","programNameFilter","programOwnerFilter","impactFilter","keyResultFilter","employeeFilter"])},M.onChange=e=>{this.resetNextList(["programList","programOwnerList","impactList","keyResultList","employeeList"]),this.updateFilterData("objectiveOwnerIds",e),this.updateChips(this.objectiveOwnerList()||[],e),this.updateFilterByKey("programNameFilter","objectiveOwnerIds",e),this.updateNextFilters(["programNameFilter","programOwnerFilter","impactFilter","keyResultFilter","employeeFilter"])},G.onChange=e=>{this.resetNextList(["programOwnerList","impactList","keyResultList","employeeList"]),this.updateFilterData("programIds",e),this.updateChips(this.programList()||[],e),this.updateFilterByKey("programOwnerFilter","programIds",e),this.updateNextFilters(["programOwnerFilter","impactFilter","keyResultFilter","employeeFilter"])},B.onChange=e=>{this.resetNextList(["impactList","keyResultList","employeeList"]),this.updateFilterData("programOwnerIds",e),this.updateChips(this.programOwnerList()||[],e),this.updateFilterByKey("impactFilter","programOwnerIds",e),this.updateNextFilters(["impactFilter","keyResultFilter","employeeFilter"])},V.onChange=e=>{this.resetNextList(["keyResultList","employeeList"]),this.updateFilterData("impactIds",e),this.updateChips(this.impactList()||[],e),this.updateFilterByKey("keyResultFilter","impactIds",e),this.updateNextFilters(["keyResultFilter","employeeFilter"])},W.onChange=e=>{this.resetNextList(["employeeList"]),this.updateFilterData("keyResultIds",e),this.updateChips(this.keyResultList()||[],e),this.updateFilterByKey("employeeFilter","keyResultIds",e),this.updateNextFilters(["employeeFilter"])},U.onChange=e=>{this.updateFilterData("activityAssigneeIds",e),this.updateChips(this.employeeList()||[],e)},Ee.onChange=e=>this.#t.next(e),_e.onChange=e=>this.onChangeDate(e)}handleFilterFieldsScrollEvents(){N.fieldConfig.onScroll=()=>this.updateScrollPagination("objectiveList",this.objectiveDropdown.value(),"objectiveNameFilter"),M.fieldConfig.onScroll=()=>this.updateScrollPagination("objectiveOwnerList",this.objectiveOwnerDropdown.value(),"objectiveOwnerFilter"),G.fieldConfig.onScroll=()=>this.updateScrollPagination("programList",this.programDropdown.value(),"programNameFilter"),B.fieldConfig.onScroll=()=>this.updateScrollPagination("programOwnerList",this.programOwnerDropdown.value(),"programOwnerFilter"),V.fieldConfig.onScroll=()=>this.updateScrollPagination("impactList",this.impactDropdown.value(),"impactFilter"),W.fieldConfig.onScroll=()=>this.updateScrollPagination("keyResultList",this.keyResultDropdown.value(),"keyResultFilter"),U.fieldConfig.onScroll=()=>this.updateScrollPagination("employeeList",this.employeeDropdown.value(),"employeeFilter")}handleFilterFieldsSearchEvents(){N.fieldConfig.onSearch=e=>this.updateSearching("objectiveNameFilter","objectiveList",e),M.fieldConfig.onSearch=e=>this.updateSearching("objectiveOwnerFilter","objectiveOwnerList",e),G.fieldConfig.onSearch=e=>this.updateSearching("programNameFilter","programList",e),B.fieldConfig.onSearch=e=>this.updateSearching("programOwnerFilter","programOwnerList",e),V.fieldConfig.onSearch=e=>this.updateSearching("impactFilter","impactList",e),W.fieldConfig.onSearch=e=>this.updateSearching("keyResultFilter","keyResultList",e),U.fieldConfig.onSearch=e=>this.updateSearching("employeeFilter","employeeList",e)}updateFilterData(e,t){this.#n.update(o=>l(r({},o),{processId:+this.processId(),[e]:t})),this.filterData=l(r({},this.filterData),{processId:+this.processId(),[e]:t}),this.filterChange.emit(this.filterData)}removeDuplicateChips(e){return e.filter((t,o,n)=>o===n.findIndex(c=>c.id===t.id))}updateChips(e,t){let o=e.filter(n=>t.includes(n.id));this.selectedChips.update(n=>{let c=n.filter(d=>t.includes(d.id)||!e.some(E=>E.id===d.id));return this.removeDuplicateChips([...c,...o])})}onChangeDate(e){if(e&&e.end!=""){let{start:t,end:o}=e;t=this.#o.transform(t,"yyyy-MM-dd"),o=this.#o.transform(o,"yyyy-MM-dd");let n=this.#o.transform(t,"d MMMM yyyy"),c=this.#o.transform(o,"d MMMM yyyy");this.selectedChips.update(d=>[...d.filter(E=>E.filterType!=="DATE"),{id:"DATE_RANGE",filterType:"DATE",name:`${n} - ${c||""}`}]),this.filterChange.emit(l(r({},this.filterData),{startDate:t,endDate:o})),this.#n.update(d=>l(r({},d),{startDate:t,endDate:o})),this.updateNextFilters(["objectiveNameFilter","objectiveOwnerFilter","programNameFilter","programOwnerFilter","impactFilter","keyResultFilter","employeeFilter"],{startDate:t,endDate:o})}}listenToSearchTyping(){this.#t.pipe(Pe(1e3),xe()).subscribe(e=>{this.filterData=l(r({},this.filterData),{fullSearchKeyword:e.trim()}),this.filterChange.emit(this.filterData)})}removeChip(e){e.filterType==="DATE"&&(this.#i?.get("date")?.setValue(null),this.#i?.get("date")?.updateValueAndValidity(),this.filterChange.emit(l(r({},this.filterData),{startDate:"",endDate:""}))),this.selectedChips.update(t=>t.filter(o=>o.id!==e.id)),this.setDropDownValuesOnRemoveChip(e)}setDropDownValuesOnRemoveChip(e){switch(e.filterType){case"OBJECTIVE":this.setValueAtFormGroup("objectiveIds",e.id);break;case"OBJECTIVE_OWNER":this.setValueAtFormGroup("objectiveOwnerIds",e.id);break;case"PROGRAM":this.setValueAtFormGroup("programIds",e.id);break;case"PROGRAM_OWNER":this.setValueAtFormGroup("programOwnerIds",e.id);break;case"IMPACT":this.setValueAtFormGroup("impactIds",e.id);break;case"KEY_RESULT":this.setValueAtFormGroup("keyResultIds",e.id);break;case"EMPLOYEE":this.setValueAtFormGroup("activityAssigneeIds",e.id);break;default:break}}setValueAtFormGroup(e,t){let o=this.#i?.get(e)?.value?.filter(n=>n!=t);this.#i?.get(e)?.setValue(o)}onFormGroupChange(e){this.#i=e}resetFilter(e){this[e].update(t=>l(r({},t),{pageable:l(r({},t.pageable),{pageIndex:0})}))}updateSearching(e,t,o){this.resetFilter(e),this[t].set([]),this[e].update(n=>l(r({},n),{keyword:o??void 0}))}updateScrollPagination(e,t,o){this[e]().length<t?.totalElements&&this[o].update(n=>l(r({},n),{pageable:l(r({},n.pageable),{pageIndex:n.pageable.pageIndex+1})}))}createFilterComputation(e,t){return l(r(r({},te),t),{processId:+e})}resetNextList(e){e.forEach(t=>this[t].set([]))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-filter"]],inputs:{processId:[1,"processId"]},outputs:{filterChange:"filterChange"},features:[A([ze,qe,z,Le])],decls:7,vars:1,consts:[[1,"flex","items-center","filter-form"],[1,"text-grey-200","text-sm","w-20","font-medium","text-start"],[3,"formGroupChange","formFields"],[1,"flex","flex-wrap","w-[65%]"],[3,"removed"],["matChipRemove",""]],template:function(t,o){t&1&&(s(0,"section",0)(1,"div",1),u(2,"Filter by"),p(),s(3,"lib-muk-dynamic-form",2),b("formGroupChange",function(c){return o.onFormGroupChange(c)}),p()(),s(4,"div",3),Ae(5,mt,5,2,"mat-chip-row",null,we),p()),t&2&&(a(3),m("formFields",o.formFields),a(2),Oe(o.selectedChips()))},dependencies:[re,Ne,ke,He,Je,Ye],styles:[".filter-form .group-parent mat-form-field{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px!important}  .filter-form .group-parent .muk-date-ranger mat-form-field{max-width:100%!important}"]})};var it=new Ke({label:"Comment *",placeholder:"Comment",class:"input-text-gray mb-1",key:"comment",validators:[Ie.required,Ie.maxLength(50)],isDisabled:C(!1),fieldConfig:{type:"text"}}),ot=l(r({},ve({text:"Cancel",color:ee.Warn,matType:Be.Flat})),{className:"btn btn--light-gray w-30"}),nt=l(r({},ve({text:"Submit",type:O.Submit})),{className:"btn btn--primary w-30"});var Y=class i extends k{constructor(){super(j.rejectProcess)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=T({token:i,factory:i.\u0275fac})};var pe=class i{processId=L(0);onTakeAction=L.required();#o=F(Y);#e=F(Z);#n=F(ne);#i;formFields=[it];buttons=[ot,nt];buttonClass="justify-content-start";ngOnInit(){}onFormGroupChange(e){e&&(this.#i=e)}removeValidatorsAndClasses(){let e=this.#i?.get("comment");e?.clearValidators(),e?.setValue("")}onTakeEvent(e){let{buttonConfig:t,value:o}=e;t.type===O.Submit?(e.buttonConfig.isLoading=!0,this.onSubmit(t,o)):(this.removeValidatorsAndClasses(),this.onTakeAction()({buttonConfig:t,value:o},()=>{}))}onSubmit(e,t){t=l(r({},t),{processId:this.processId()}),this.#o.update(t).pipe(K(()=>e.isLoading=!1)).subscribe({next:o=>{this.#n.addAlert(r({message:"Process Rejected successfully"},oe)),this.#e.navigate(["admin/process"]),this.onTakeAction()({buttonConfig:e,value:this.processId()??{}},()=>{}),this.removeValidatorsAndClasses()}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-reject-comment"]],inputs:{processId:[1,"processId"],onTakeAction:[1,"onTakeAction"]},features:[A([Y])],decls:1,vars:4,consts:[[3,"event","formGroupChange","formFields","buttons","buttonClass","isStickyForm"]],template:function(t,o){t&1&&(s(0,"lib-muk-dynamic-form",0),b("event",function(c){return o.onTakeEvent(c)})("formGroupChange",function(c){return o.onFormGroupChange(c)}),p()),t&2&&m("formFields",o.formFields)("buttons",o.buttons)("buttonClass",o.buttonClass)("isStickyForm",!0)},dependencies:[re],encapsulation:2})};var rt=[{label:"OBJ NAME",path:"",type:g.Content,contentIndex:0},{label:"OBJ OWNER",path:"",type:g.Content,contentIndex:1},{label:"OBJ WEIGHT",path:"",type:g.Content,contentIndex:2},{label:"PROG NAME",path:"",type:g.Content,contentIndex:3},{label:"PROG OWNER",path:"",type:g.Content,contentIndex:4},{label:"PROG WEIGHT",path:"",type:g.Content,contentIndex:5},{label:"IMP NAME",path:"",type:g.Content,contentIndex:6},{label:"IMP WEIGHT",path:"",type:g.Content,contentIndex:7},{label:"KEY RES NAME",path:"",type:g.Content,contentIndex:8},{label:"KEY RES WEIGHT",path:"",type:g.Content,contentIndex:9},{label:"ACTIVITY",path:"",type:g.Content,contentIndex:10},{label:"ACTIVITY WEIGHT",path:"",type:g.Content,contentIndex:11},{label:"START",path:"",type:g.Content,contentIndex:12},{label:"END",path:"",type:g.Content,contentIndex:13},{label:"ACTIVITY ASSIGNEE",path:"",type:g.Content,contentIndex:14}];var H=class i extends k{constructor(){super(j.approveProcess)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=T({token:i,factory:i.\u0275fac})};var $=class i extends k{constructor(){super(j.processActivity)}getProcessActivities(e){return this.getAll(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=T({token:i,factory:i.\u0275fac})};var ct=(i,e,t,o,n,c,d,E,ce,ue,de,fe,he,ge,Ce)=>[i,e,t,o,n,c,d,E,ce,ue,de,fe,he,ge,Ce];function ut(i,e){if(i&1&&(s(0,"div",24),D(1,"img",25),s(2,"span",26),u(3),p()()),i&2){let t=e.item;a(),m("src","./assets/icons/obj.svg",q),a(),m("matTooltip",t.objective==null?null:t.objective.name),a(),w(t.objective==null?null:t.objective.name)}}function dt(i,e){if(i&1&&(s(0,"div",24),D(1,"img",27),s(2,"span",26),u(3),p()()),i&2){let t=e.item,o=S();a(),m("src",o.imgUrl+(t.objective==null?null:t.objective.owner.profileImage),q),a(),m("matTooltip",t.objective==null||t.objective.owner==null?null:t.objective.owner.name),a(),w(t.objective==null||t.objective.owner==null?null:t.objective.owner.name)}}function ft(i,e){if(i&1&&(s(0,"div",28),u(1),p()),i&2){let t=e.item;a(),y(" ",t.objective==null?null:t.objective.weight.toFixed(2)," % ")}}function ht(i,e){if(i&1&&(s(0,"div",29),u(1),p()),i&2){let t=e.item;m("matTooltip",t.program==null?null:t.program.name),a(),y(" ",t.program==null?null:t.program.name," ")}}function gt(i,e){if(i&1&&(s(0,"div",24),D(1,"img",27),s(2,"span",26),u(3),p()()),i&2){let t=e.item,o=S();a(),m("src",o.imgUrl+(t.program==null?null:t.program.owner.profileImage),q),a(),m("matTooltip",t.objective==null||t.objective.owner==null?null:t.objective.owner.name),a(),w(t.program==null||t.program.owner==null?null:t.program.owner.name)}}function Ct(i,e){if(i&1&&(s(0,"div",28),u(1),p()),i&2){let t=e.item;a(),y(" ",t.program==null?null:t.program.weight.toFixed(2)," % ")}}function yt(i,e){if(i&1&&(s(0,"div",30),u(1),p()),i&2){let t=e.item;m("matTooltip",t.impact==null?null:t.impact.name),a(),y(" ",t.impact==null?null:t.impact.name," ")}}function Ft(i,e){if(i&1&&(s(0,"div",28),u(1),p()),i&2){let t=e.item;a(),y(" ",t.impact==null?null:t.impact.weight.toFixed(2)," % ")}}function vt(i,e){if(i&1&&(s(0,"div",30),u(1),p()),i&2){let t=e.item;m("matTooltip",t.keyResult==null?null:t.keyResult.name),a(),y(" ",t.keyResult==null?null:t.keyResult.name," ")}}function bt(i,e){if(i&1&&(s(0,"div",31),u(1),p()),i&2){let t=e.item;m("matTooltip",t.keyResult==null?null:t.keyResult.weight),a(),y(" ",t.keyResult==null?null:t.keyResult.weight.toFixed(2)," % ")}}function It(i,e){if(i&1&&(s(0,"div",30),u(1),p()),i&2){let t=e.item;m("matTooltip",t.activity==null?null:t.activity.name),a(),y(" ",t==null?null:t.name," ")}}function _t(i,e){if(i&1&&(s(0,"div",28),u(1),p()),i&2){let t=e.item;a(),y(" ",t==null?null:t.weight.toFixed(2)," % ")}}function Et(i,e){if(i&1&&(s(0,"div",30),u(1),ye(2,"date"),p()),i&2){let t=e.item;m("matTooltip",t.startDate),a(),y(" ",Fe(2,2,t.startDate,"d MMMM yyyy")," ")}}function Lt(i,e){if(i&1&&(s(0,"div",30),u(1),ye(2,"date"),p()),i&2){let t=e.item;m("matTooltip",t.endDate),a(),y(" ",Fe(2,2,t.endDate,"d MMMM yyyy")," ")}}function Tt(i,e){if(i&1&&(s(0,"div",24),D(1,"img",27),s(2,"span",26),u(3),p()()),i&2){let t=e.item,o=S();a(),m("src",o.imgUrl+(t.assignee==null?null:t.assignee.profileImage),q),a(),m("matTooltip",t.assignee==null?null:t.assignee.name),a(),w(t.assignee==null?null:t.assignee.name)}}var me=class i{id=L.required();#o=F($);#e=F(H);#n=F(Z);#i=F(Ue);#t=ie(te);#r=F(ne);processRequest;buttons={buttons:[],parentClass:""};tableConfig={dataSource:new be([]),displayedColumns:rt,pageIndex:0,totalElements:0,pageSize:12,isLoading:!1,loadMoreButtonConfig:{text:"Load More",color:ee.Primary,isMukButton:!0}};popupButton={buttons:[Ze,et],parentClass:""};imgUrl=Ve.imgURL;isLoading=C(!1);constructor(){Q(()=>{this.tableConfig.isLoading=ae.isDisabled=se.isDisabled=this.isLoading()})}ngOnInit(){this.initialize(),this.getActivities()}initialize(){ae.onClick=e=>this.onApprove(),se.onClick=()=>this.onReject()}onPaginatorChange(e){this.#t.pageable.pageIndex=e,this.tableConfig.pageIndex=e,this.getActivities()}onTakeAction(e){e.buttonConfig.text==="Deactivate"?this.openDialog({title:"Deactivate",message:"",content:null,component:$e,inputs:{}},{width:"580px",height:"350px"}):e.buttonConfig.text==="Edit"&&Qe.onClick(e)}onReject(){this.isLoading.set(!0),this.openDialog({title:"Rejection Comment",content:null,component:pe,inputs:{processId:this.id()}},{width:"500px",height:"670px",panelClass:"custom-panel-class"})}onApprove(){this.isLoading.set(!0),this.#e.update({processId:this.id()}).pipe(K(()=>this.isLoading.set(!1))).subscribe({next:()=>{this.#r.addAlert(r({message:"Process Request Approved"},oe)),this.#n.navigate(["admin/process"])}})}openDialog(e,t){let o=this.#i.openDialog(l(r({},e),{inputs:l(r({},e.inputs),{onTakeAction:n=>this.onSendModalTakeEvent(n,o)})}),t)}onSendModalTakeEvent=(e,t)=>{let{buttonConfig:o}=e;o.type===O.Submit&&this.getActivities(),t.close(),this.isLoading.set(!1)};getActivities(e){this.#t=l(r(r({},ie(this.#t)),ie(e)),{processId:+this.id()}),this.tableConfig.isLoading=!0,this.#o.getProcessActivities(this.#t).pipe(K(()=>this.tableConfig.isLoading=!1)).subscribe({next:t=>{let{activities:o,status:n}=t.payload,{content:c,totalElements:d}=o;this.tableConfig.dataSource=new be(c),this.tableConfig.totalElements=d,n==="WAITING_FOR_APPROVAL"&&(this.buttons.buttons=[se,ae])}})}handleValueChange(e){this.#t=r(l(r({},this.#t),{pageable:l(r({},this.#t.pageable),{pageIndex:0})}),e),this.getActivities(this.#t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-process-action-list"]],inputs:{id:[1,"id"]},features:[A([$,H])],decls:40,vars:21,consts:[["objName",""],["objOwner",""],["objWeight",""],["progName",""],["progOwner",""],["progWeight",""],["impact",""],["impactWeight",""],["keyResName",""],["keyResWeight",""],["activity",""],["activityWeight",""],["startDate",""],["endDate",""],["activityAssignee",""],[1,"grid-layout"],[1,"title-section"],[1,"title-page","mb-2","lg:mb-0"],[1,"button-section"],[3,"config"],[1,"section-wrapper"],[3,"paginatorChange","takeAction","config","contents"],["actions","",1,"table-actions"],[3,"filterChange","processId"],[1,"flex","items-center","gap-3"],["onerror","this.onerror=null;this.src='./assets/images/icons/obj.svg';","alt","person-icon",1,"w-9","h-9","object-cover",3,"src"],[1,"truncate-width",3,"matTooltip"],["onerror","this.onerror=null;this.src='./assets/images/icons/avatar.png';","alt","person-icon",1,"w-5","h-5","rounded-full","object-cover",3,"src"],[1,"flex","items-center","gap-3","text-primary","font-semibold","justify-content-center"],[1,"flex","items-center","gap-3","progName","truncate-width",3,"matTooltip"],[1,"flex","items-center","gap-3","truncate-width",3,"matTooltip"],[1,"flex","items-center","gap-3","text-primary","font-semibold","justify-content-center",3,"matTooltip"]],template:function(t,o){if(t&1){let n=X();s(0,"div",15)(1,"div",16)(2,"div",17),u(3),p()(),s(4,"div",18),D(5,"lib-muk-dynamic-buttons",19),p()(),s(6,"section",20)(7,"lib-muk-table",21),b("paginatorChange",function(d){return P(n),x(o.onPaginatorChange(d))})("takeAction",function(d){return P(n),x(o.onTakeAction(d))}),s(8,"div",22)(9,"app-filter",23),b("filterChange",function(d){return P(n),x(o.handleValueChange(d))}),p()()()(),De(10,ut,4,3,"ng-template",null,0,h)(12,dt,4,3,"ng-template",null,1,h)(14,ft,2,1,"ng-template",null,2,h)(16,ht,2,2,"ng-template",null,3,h)(18,gt,4,3,"ng-template",null,4,h)(20,Ct,2,1,"ng-template",null,5,h)(22,yt,2,2,"ng-template",null,6,h)(24,Ft,2,1,"ng-template",null,7,h)(26,vt,2,2,"ng-template",null,8,h)(28,bt,2,2,"ng-template",null,9,h)(30,It,2,2,"ng-template",null,10,h)(32,_t,2,1,"ng-template",null,11,h)(34,Et,3,5,"ng-template",null,12,h)(36,Lt,3,5,"ng-template",null,13,h)(38,Tt,4,3,"ng-template",null,14,h)}if(t&2){let n=f(11),c=f(13),d=f(15),E=f(17),ce=f(19),ue=f(21),de=f(23),fe=f(25),he=f(27),ge=f(29),Ce=f(31),at=f(33),st=f(35),lt=f(37),pt=f(39);a(3),w(o.processRequest==null?null:o.processRequest.name),a(2),m("config",o.buttons),a(2),m("config",o.tableConfig)("contents",je(5,ct,[n,c,d,E,ce,ue,de,fe,he,ge,Ce,at,st,lt,pt])),a(2),m("processId",o.id())}},dependencies:[Xe,le,We,Ge,Me,z],encapsulation:2})};var ao=[{path:"",loadComponent:()=>import("./chunk-PRABBPXQ.js").then(i=>i.ProcessComponent),children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"ALL"}},{path:"waiting-response",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"WAITING_FOR_APPROVAL"}},{path:"active",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"ACTIVE"}},{path:"pending",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"PENDING"}},{path:"upcoming",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"UPCOMING"}},{path:"rejected",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"REJECTED"}},{path:"expired",loadComponent:()=>import("./chunk-F6UE6OAN.js").then(i=>i.ProcessListComponent),data:{status:"EXPIRED"}}]},{path:":id",component:me}];export{ao as default};
