import{F as h,Qc as x,Sc as v,Tc as j,U as d,Uc as D,Y as b,c as g,ea as l,f as m,h as w,la as c,lb as f,ta as k,ua as i}from"./chunk-VU6Q4IP4.js";import{a as y,b as p}from"./chunk-TSRGIXR5.js";function S(n){n||(c(S),n=l(i));let e=new g(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(d(e))}function O(n,e){!e?.injector&&c(O);let t=e?.injector??l(k),r=new w(1),u=j(()=>{let o;try{o=n()}catch(a){v(()=>r.error(a));return}v(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(i).onDestroy(()=>{u.destroy(),r.complete()}),r.asObservable()}function R(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&c(R);let r=t?e?.injector?.get(i)??l(i):null,u=q(e?.equal),o;e?.requireSync?o=f({kind:0},{equal:u}):o=f({kind:1,value:e?.initialValue},{equal:u});let a=n.subscribe({next:s=>o.set({kind:1,value:s}),error:s=>{if(e?.rejectErrors)throw s;o.set({kind:2,error:s})}});if(e?.requireSync&&o().kind===0)throw new b(601,!1);return r?.onDestroy(a.unsubscribe.bind(a)),x(()=>{let s=o();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new b(601,!1)}},{equal:e?.equal})}function q(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function C(n){return n?.injector||c(C),D(p(y({},n),{loader:e=>{let t=new m;return e.abortSignal.addEventListener("abort",()=>t.next()),new Promise((r,u)=>{n.loader(e).pipe(h(1),d(t)).subscribe({next:r,error:u,complete:()=>u(new Error("Resource completed before producing a value"))})})}}))}export{S as a,O as b,R as c,C as d};
